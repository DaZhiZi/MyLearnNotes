题目链接：[整数中1出现的次数](https://www.nowcoder.com/practice/bd7f978302044eee894445e244c7eee6?tpId=13&tqId=11184&rp=2&ru=%2Fta%2Fcoding-interviews&qru=%2Fta%2Fcoding-interviews%2Fquestion-ranking&tPage=2)

## 题目描述

求出1 - 13的整数中1出现的次数,并算出100-1300的整数中1出现的次数？为此他特别数了一下1-13中包含1的数字有1、10、11、12、13因此共出现6次,但是对于后面问题他就没辙了。ACMer希望你们帮帮他,并把问题更加普遍化,可以很快的求出任意非负整数区间中1出现的次数（从1 到 n 中1出现的次数）。

## 思路

数学方法，按照个位十位百位拆分一下，比如：`3141592` 这个数字，首先：

| i    | a       | b    | 贡献                                |
| ---- | ------- | ---- | ----------------------------------- |
| 1    | 3141592 | 0    | `(3141592+8)/10*1+0=314160`         |
| 10   | 314159  | 2    | `(314159+8)/10*10+0=314160`         |
| 100  | 31415   | 92   | `(31415+8)/10*100+0=314200`         |
| 1000 | 3141    | 592  | `(3141+8)/10*1000+1*(592+1)=314593` |

比如我们从：

- i=10 分隔开，此时十位的数字是 9 ，给十位取值为 1 ，那么它左边取值范围是 `0-31415` ，右边可以取值`0-9`，所以总的贡献为`31416*10=314160`种情况

- i=100 分隔开，此时百位的数字是 5 ，给百位取值为 1 ，那么它左边取值范围是 `0-3141` ，右边可以取值`0-99`，所以总的贡献为`3142*100=314200`种情况

- 注意，i=1000 分隔开，此时千位的数字是 1 ，给千位取值为 1 ，那么它左边取值范围有两种情况：

  1. 左边取值为 `0-313` 时，右边可以取值为 `0-999` ,产生的贡献为`314*1000=314000`
  2. 左边取值为`314`时，右边取值只能为`0-592`,产生的贡献为`593`

  所以总贡献为`314000+592=314593`

这样就体现出了代码中 `+8` 的好处，对于 0 和 1 会特殊处理，对于`2-9`会正常的加一

## 代码

```cpp
class Solution
{
  public:
    int NumberOf1Between1AndN_Solution(int n)
    {
        int ans = 0;
        for (int i = 1; i <= n; i *= 10)
        {
            int a = n / i, b = n % i;
            ans = ans + (a + 8) / 10 * i + (a % 10 == 1) * (b + 1);
        }
        return ans;
    }
};
```

