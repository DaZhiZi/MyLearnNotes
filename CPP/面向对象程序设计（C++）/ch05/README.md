## 第五讲 找到对象，确定接口

### 封装

以电子计价器为例，把不变化的苹果单价和香蕉单价封装起来，形成 Calculator 这个重要概念，使用 Calculator 时把经常变化的重量作为参数。

### 接口与隐藏

- 接口：类暴露出来的部分，是类所提供的功能
- 隐藏实现细节

如何实现日益增长的需求？

### 例子

实现一个$n*n​$的旋转矩阵填充（蛇形填数）的 oop 程序。

- [1.cpp](1.cpp)

当需要修改的时候，只需要改一个函数findPosition()即可.

但是，面对更高的需求，也许需要用到其他的特性，我们把这个程序进行改进.

### 多态的威力

- 使用虚函数，将 findPosition() 函数的实现推迟到子类.

```cpp
class ClockwiseMatrix : public Matrix
{
    int row, col;
    char dir;

  public:
    int findPosition();
};
class RowFirstMatrix : public Matrix
{
    int next;

  public:
    int findPosition()
    {
        return next++;
    }
};
```

利用虚函数，让使用者调用不同的子类，实现不同的功能。

### 针对接口而不是针对实现编程

- 通过抽象出「抽象概念」，设计出描述这个抽象概念的「抽象类」，或称「接口类」，这个类有一系列的（纯）虚函数，描述了这个类的「接口」
- 对这个接口类进行继承并实现这些（纯）虚函数，从而形成这个抽象概念的「实现类」，实现可以有很多种适应变化
- 在使用这个概念的时候我们使用接口类来引用这个概念，而不是直接使用实现类，从而避免实现类的改变造成整个程序的大规模修改。